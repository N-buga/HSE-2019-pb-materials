# Параллелимся

## Задачи

Раз у нас параллельное программирование, то будем параллелиться. Выбирайте свой уровень понимания теории с лекции и работаем. Я тоже буду параллелиться, иногда что-то показывать общее.

### Урвоеьн 1

В течение работы не забывайте про valgrind и fsanitizer :)

1. Возьмите файлик `01_flags.cpp`. Скомпилируйте и запустите.
2. Сделайте так, чтобы значения флага выводились последовательно. (Т.е. чтобы каждое изменение ловил consumer)
3. Избавьтесь от всех ошибок параллельного программирования :)
4. Избавьтесь от активного ожидания.

### Рувоень 2

У вас есть очень сложная с точки зрения вычисления функция. В общем случае это может быть хоть скачивание данных из интернета. Однако, вы не хотите, чтобы ваша программа зависала, пока вы ждете завершения той функции. Вы хотите дать возможность смотреть на прогресс или просто заниматься своими делами в приложении.

Именно это хочется проэмулировать данной задачей. 

В файле `02_show_and_compute.cpp` лежит сложно вычислимая функция, которая как-то меняет значение переменной.

Пользователь может вводить две команды: `show` и `next`. Вы хотите, чтобы show работало в любой момент и вызов next позволял и дальше писать всякие команды.

1. Впишите код так, чтобы работало show и next. Если предыдущие вычисления не закончились, а вы вызываете next, то надо сообщить пользователю, что идут старые вычисления.
2. Попробуйте поймать spurious wakeup. Как это сделать?
3. Как можно протестировать правильность работы программы? Обсуждение.
4. Вообще, хотелось бы, чтобы задачи не терялись... Как решить?
